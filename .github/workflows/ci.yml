name: Build legate.core
on: [push, pull_request]
env:
  DOCKER_AUTH_TOKEN: ${{ secrets.DOCKER_AUTH_TOKEN }}
  COMMIT: ${{ github.event.pull_request.head.sha }}
  PROJECT: github-core-ci
jobs:
  build:
    runs-on: self-hosted
    steps:
      - uses: actions/checkout@v2
        with:
          ref: ${{ github.event.pull_request.head.sha }}
      - name: Run CI
        run: |
          cd ..
          git clone ssh://git@gitlab-master.nvidia.com:12051/legate/legate-ci.git
          mv legate.core legate-ci
          cd legate-ci
          ./build.sh
          
