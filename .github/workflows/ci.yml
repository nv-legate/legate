name: Build legate.core
on: [push, pull_request]
env:
  DOCKER_AUTH_TOKEN: ${{ secrets.DOCKER_AUTH_TOKEN }}
  COMMIT: ${{ github.event.pull_request.head.sha }}
  PROJECT: github-core-ci
jobs:
  build:
    runs-on: self-hosted
    steps:
      - uses: actions/checkout@v2
        with:
          ref: ${{ github.event.pull_request.head.sha }}
      - name: Run CI
        run: |
          cd  /data/github-runner/_work/legate-ci
          git pull
          env
          cd  /data/github-runner/_work/legate-ci/github-ci/legate.core
          ./build.sh
